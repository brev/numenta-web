<!DOCTYPE html>
 <html lang="en"><head><title data-react-helmet="true">Anomaly of the Week | Numenta.com</title><meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="X-UA-Compatible" content="IE=edge"/><meta data-react-helmet="true" name="author" content="Numenta"/><meta data-react-helmet="true" name="description" content="Numenta — Leading the New Era of Machine Intelligence"/><meta data-react-helmet="true" name="generator" content="© Numenta.com v0.2.24 Wed Jul 27 2016 09:56:31 GMT-0700 (PDT) Gatsby.js"/><meta data-react-helmet="true" name="keywords" content="@TODO,TODO,TODO"/><link data-react-helmet="true" rel="shortcut icon" href="/numenta-web/assets/icons/favicon.ico?v=0.2.24"/><link data-react-helmet="true" rel="stylesheet" href="/numenta-web/styles.css?v=0.2.24"/></head><body class="body"><div id="react-mount"><div class="style_layout_29A tachyons_f4_1Zt tachyons_f5-ns_QvA tachyons_fw4_3tj" data-reactroot="" data-reactid="1" data-react-checksum="-1174201110"><div class="style_appbar_3gV tachyons_bg-white_WF0 tachyons_fixed_I-c tachyons_h3_bmk tachyons_ph3_Qxl tachyons_shadow-1_8y5 tachyons_top-0_2pS tachyons_w-100_1xC" data-reactid="2"><header class="style_header_21a tachyons_center_iwf tachyons_cf_g7R tachyons_mw-100_ge3 tachyons_mw7-m_FjT tachyons_mw8-l_KcP" data-reactid="3"><div class="style_logo_t1Q tachyons_fl_wJK tachyons_relative_1fO tachyons_top-1_UVW" data-reactid="4"><a class="style_imagelink_kuG tachyons_dim_1n1 tachyons_link_2zV theme_color-blue_2lo style__visited_3qZ" href="/numenta-web/" data-reactid="5"><img alt="Numenta Logo" class="style_image_Kv4 tachyons_br2_rOa" src="/numenta-web/78d7c43a01aa37f432db4cb375ee2b7f.svg" title="Numenta" data-reactid="6"/></a></div><div class="style_search_Gt9 tachyons_fr_2Nn tachyons_mt3_11A" data-reactid="7"><form accept-charset="UTF-8" autocomplete="off" class="style_form_BAR tachyons_pa0_RbR tachyons_mb3_1mV tachyons_mh0_2XV tachyons_mt0_12u" enctype="multipart/form-data" method="post" data-reactid="8"><span class="style_label_2rM tachyons_clip_2YG" data-reactid="9"><label class="style_formLabel_13N tachyons_f5_2mB tachyons_fl_wJK tachyons_fw6_1NV tachyons_mr3_1Ez tachyons_relative_1fO tachyons_v-top_1JD tachyons_w4_3jJ" for="q" data-reactid="10">Search</label></span><span class="style_query_1Mw tachyons_fl_wJK tachyons_flex_22H tachyons_mb2_1U4 tachyons_relative_1fO tachyons_w4_3jJ tachyons_w5-ns_1tF" data-reactid="11"><input type="search" class="style_formInput_oLS tachyons_ba_1NL tachyons_b--black-20_1zc tachyons_br2_rOa tachyons_f5_2mB tachyons_flex-auto_1Fv tachyons_fw3_3xI tachyons_input-reset_3Az tachyons_pb1_2R8 tachyons_ph2_2up tachyons_pt2_3ym tachyons_silver_3lN style__focus_12t style_large_5KY" id="q" name="q" placeholder="Search..." data-reactid="12"/></span><button class="style_button_23U tachyons_br2_rOa tachyons_dim_1n1 tachyons_flex-auto_1Fv tachyons_ma0_2xh tachyons_pointer_25K style_light_3PJ tachyons_bg-white_WF0 tachyons_bn_3W7 tachyons_f4_1Zt tachyons_pa1_3f3 theme_color-blue_2lo" type="submit" data-reactid="13"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;color:inherit;" data-reactid="14"><g data-reactid="15"><path d="m27.2 18.6q0-4.2-2.9-7.1t-7.1-2.9-7 2.9-3 7.1 2.9 7 7.1 3 7.1-3 2.9-7z m11.4 18.5q0 1.2-0.8 2.1t-2 0.8q-1.2 0-2-0.8l-7.7-7.7q-4 2.8-8.9 2.8-3.2 0-6.1-1.3t-5-3.3-3.4-5-1.2-6.1 1.2-6.1 3.4-5.1 5-3.3 6.1-1.2 6.1 1.2 5 3.3 3.4 5.1 1.2 6.1q0 4.9-2.7 8.9l7.6 7.6q0.8 0.9 0.8 2z" data-reactid="16"></path></g></svg></button></form></div></header></div><main class="style_main_GV3 tachyons_bg-white_WF0 tachyons_center_iwf tachyons_mt5_2gs tachyons_mw-100_ge3 tachyons_mw7-m_FjT tachyons_mw8-l_KcP tachyons_ph3_Qxl tachyons_ph4-l_pNz tachyons_pb4_38s tachyons_pt3_1QC" data-reactid="17"><!-- react-empty: 18 --><div class="markdown" data-reactid="19"><!-- react-empty: 20 --><h1 data-reactid="21">Anomaly of the Week</h1><div data-reactid="22"><p>It was Thursday night, March 20th, at 8pm. I was cleaning up the kitchen and
getting ready to wind down when my smartphone buzzed: Grok had sent an alert.
I know that with Grok it just takes a few seconds to check things out, kind of
like text messages.  So I clicked on the notification and looked at the graph.
What followed was interesting and eye opening!</p>
<p>It turns out that on that night Amazon’s East coast datacenter, US-East-1, had
some problems. AWS API call latencies slowly increased. Eventually by about 8:40
PM API calls were so slow as to be practically unusable.   Any applications on
those servers relying on the AWS API were unusable.</p>
<p>Below are two screen shots from the Grok mobile application showing the Hourly
view and the Day view for that time period.</p>
<p><img src="/assets/img/pages/blog/2014-04-04/1.png" alt="Grok Screenshot" title="Grok Screenshot"></p>
<p><img src="/assets/img/pages/blog/2014-04-04/2.png" alt="Grok Screenshot" title="Grok Screenshot"></p>
<p>Notice that Grok flagged unusual behavior at 8pm, 35 minutes before Amazon’s API
became completely unresponsive on the East Coast.</p>
<p>To understand this better, here’s a bit of information about this server.
“test02” is a test server running an instance of Grok.  We have servers in
multiple regions but this particular server sits in US-East-1 and was affected
by the incident.  Our servers make lots of outgoing API calls as is typical for
AWS applications.   The blue line shows CPU load on test02. As API calls slowed
down, retries and lags increased and the CPU load started became a bit wonky.
Eventually Cloudwatch became unresponsive and the data stopped coming in. The
really cool thing is that the alert happened 35 minutes before that point.
Luckily test02 is just a test server. We keep most of our production stuff in
US-West so this didn’t directly affect us. However I do know that plenty of US-
East users were affected and could have benefited greatly from an early warning.</p>
<p>It is useful to think about whether this could have been caught by some other
mechanism. First, any threshold based alerting system would NOT have caught the
anomaly. CPU load of 66% is not unusual at all for this server.  In fact there
are times when the CPU goes close to 100% when this server trains new models so
that’s out. A system looking at our service latencies would not have detected
anything either – our web server was actually perfectly responsive the entire
time. An anomaly detection scheme that relies on averages and standard
deviations would not have worked. The incident happened too fast, within just a
few 5-minute samples. A statistical technique that made a decision that fast
would lead to tons of false positives on noisy data (including normal usage when
CPU jumps to 100%!).  You can see in the hour view how fast Grok turned red –
Grok uses temporal sequences to detect unusual behavior. A more sophisticated
training mechanism that relies on classifying known patterns also wouldn’t have
worked. I have never seen this behavior before and would not have been able to
predict it.</p>
<p>Isn’t that the whole point though? We need a system that automatically detects
the unknown unknowns.</p>
<p>The above are actual snapshots from my smartphone for our server and this is an
actual incident (I admit I dramatized the first paragraph – let’s blame
marketing for that :-). For the record, below is a snapshot of the AWS status
page. Amazon states that no instances were affected and this is true – we can
attest that our machines kept running fine. On the other hand, any code that
relied on the AWS API was drastically affected by this incident.</p>
<p><img src="/assets/img/pages/blog/2014-04-04/3.png" alt="AWS Screenshot" title="AWS Screenshot"></p>
<p>In general AWS does an amazing job of keeping their infrastructure up and
running but occasional incidents do happen. These incidents are unpredictable
and they are unavoidable. It is comforting to know that Grok can give me a heads
up and some lead-time to investigate and figure out what to do. In a production
context I would have had plenty of time to spin up servers in another region and
redirect my traffic there.</p>
</div></div></main><div class="style_footbar_D75 tachyons_w-100_1xC" data-reactid="23"><footer class="style_footer_XFN tachyons_br--bottom_1e0 tachyons_bg-white_WF0 tachyons_br2_rOa tachyons_center_iwf tachyons_f6_14U tachyons_mw-100_ge3 tachyons_mw7-m_FjT tachyons_mw8-l_KcP tachyons_pv3_1Zi tachyons_silver_3lN tachyons_tc_3ab" data-reactid="24"><span data-reactid="25"><!-- react-text: 26 -->© <!-- /react-text --><!-- react-text: 27 -->2016<!-- /react-text --><!-- react-text: 28 --> <!-- /react-text --><!-- react-text: 29 --> <!-- /react-text --><a class="style_textlink_206 tachyons_dim_1n1 tachyons_link_2zV tachyons_underline-hover_1xv theme_color-blue-dark_2u0 style__visited_BRb" href="/numenta-web/" data-reactid="30">Numenta</a></span><span class="style_mark_2c_ tachyons_dib_1gH tachyons_h1_Kza tachyons_mh3_2gH tachyons_relative_1fO tachyons_w1_1jO" data-reactid="31"><img alt="Numenta Logo Mark" class="style_image_Kv4 tachyons_br2_rOa" src="/numenta-web/87b23beb8a4b7dea7d88099bfb28d182.svg" title="Numenta" data-reactid="32"/></span><span data-reactid="33"><a class="style_textlink_206 tachyons_dim_1n1 tachyons_link_2zV tachyons_underline-hover_1xv theme_color-blue-dark_2u0 style__visited_BRb" href="/numenta-web/legal/privacy/" data-reactid="34">Privacy</a><span class="style_spacer_1h0 tachyons_mh1_-Z3 tachyons_silver_3lN" data-reactid="35">•</span><a class="style_textlink_206 tachyons_dim_1n1 tachyons_link_2zV tachyons_underline-hover_1xv theme_color-blue-dark_2u0 style__visited_BRb" href="/numenta-web/legal/terms/" data-reactid="36">Terms</a><span class="style_spacer_1h0 tachyons_mh1_-Z3 tachyons_silver_3lN" data-reactid="37">•</span><a class="style_textlink_206 tachyons_dim_1n1 tachyons_link_2zV tachyons_underline-hover_1xv theme_color-blue-dark_2u0 style__visited_BRb" href="https://github.com/numenta/numenta-web" data-reactid="38">Source</a><span class="style_spacer_1h0 tachyons_mh1_-Z3 tachyons_silver_3lN" data-reactid="39">•</span><a class="style_textlink_206 tachyons_dim_1n1 tachyons_link_2zV tachyons_underline-hover_1xv theme_color-blue-dark_2u0 style__visited_BRb" href="/numenta-web/sitemap/" data-reactid="40">Sitemap</a></span></footer></div></div></div><script src="/numenta-web/bundle.js?v=0.2.24"></script></body></html>